@using PachiArmy.Scripts;
@using System.Timers;

<Tooltip Text="@Placeable.GetHoverText()" Multiline=true Fade=true FadeDuration="70">
    <Div class="pachimari gallery-item" onclick="@Placeable.Clicked" TextAlignment="TextAlignment.Center">
        <Image Source="@Placeable.GetImage()" Width="Width.Is100" Height="Height.Is50" />
    </Div>
</Tooltip>

@code {
    [CascadingParameter]
    public Test Owner { get; set; } = default!;

    [Parameter]
    public Placeable Placeable { get; set; } = default!;

    // [Parameter]
    // public RenderFragment ChildContent { get; set; } = default!;

    public System.Timers.Timer timer;
    protected override async Task OnInitializedAsync()
    {
        timer = new Timer(1000);
        timer.Elapsed += this.OnTimedEvent;
        timer.AutoReset = true;
        timer.Enabled = true;
        timer.Start();
    }

    public void OnTimedEvent(Object source, ElapsedEventArgs e)
    {
        Placeable.Clicked();
        Owner.Refresh();
        StateHasChanged();
    }
}